/*
* @nebula.js/snapshooter v0.1.0-alpha.29
* Copyright (c) 2020 QlikTech International AB
* Released under the MIT license.
*/

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).snapshooter=t()}(this,(function(){"use strict";function e(e,t,n,r,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(o,u){var a=t.apply(n,r);function c(t){e(a,o,u,c,i,"next",t)}function i(t){e(a,o,u,c,i,"throw",t)}c(void 0)}))}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function u(){return(u=t(regeneratorRuntime.mark((function e(n){var r,u,a,c,i,s,p,f,l,d,b,m,g,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nucleus,u=n.element,a=function(){var e={};return window.location.search.substring(1).split("&").forEach((function(t){var n=t.indexOf("="),r=t.substr(0,n),o=decodeURIComponent(t.substring(n+1));e[r]=o})),e}(),c={},i=function(e){u.innerHTML="<p>".concat(e.message,"</p>"),u.setAttribute("data-njs-error",e.message)},e.prev=4,e.next=7,r.config.snapshot.get(a.snapshot);case 7:c=e.sent,e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(4),i(e.t0),e.t0;case 14:return p=(s=c).meta,f=p.theme,l=p.language,d=p.appLayout,b=s.layout,m={id:"".concat(+new Date),getLayout:function(){var e=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),on:function(){},once:function(){}},g={id:"".concat(+new Date),createSessionObject:function(){var e=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o({id:"".concat(+new Date)},m));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getObject:function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==b.qInfo.qId){e.next=2;break}return e.abrupt("return",m);case 2:return e.abrupt("return",Promise.reject(new Error("Could not find an object with id: ".concat(t))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAppLayout:function(){var e=t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},e.next=19,r(g,{context:{theme:f,language:l,constraints:{select:!0,passive:!0,active:!0}}});case 19:return h=e.sent,e.prev=20,e.next=23,h.get({id:b.qInfo.qId},{element:u});case 23:e.next=29;break;case 25:throw e.prev=25,e.t1=e.catch(20),i(e.t1||{message:"Failed to render supernova"}),e.t1;case 29:case"end":return e.stop()}}),e,null,[[4,10],[20,25]])})))).apply(this,arguments)}return function(e){return u.apply(this,arguments)}}));
